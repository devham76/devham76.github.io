<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Python Selenium(셀레니움) 시작하기 | devYurim</title>
	<meta name="description" content="연구실에서 갑자기 논문들에 대한 impactfactor 수집기를 만들게 되었다. 파이썬 웹크롤러를 만들 수 있는 아주 기본적인 패키지는 requests와 BeautifulSoup4 라는 패키지인데 사이트마다 request 방식이 get인지 post인지 구분해야하고 request를 ...">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/python/crawler/2018/08/11/crawler-1.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="devYurim" href="/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="https://fonts.googleapis.com/css?family=Nanum+Gothic:400,700" rel="stylesheet">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-111748939-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/assets/img/blogmark.png" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">devYurim</a>
		</h1>
		<nav class="site-nav">
				<ul>
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
							<li>
								<a class="page-link" href="/about/">
									About
								</a>
							</li>
						
					
						
					
						
					
						
					
						
					
						
					
						
							<li>
								<a class="page-link" href="/tags.html">
									tags
								</a>
							</li>
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					

					<!-- Search bar -->
					
					<li>
					<form action="/search.html" method="get">
						<input type="text" id="search-box" name="query" placeholder="Search" class="">
						<button type="submit" class="">
							<i class="fa fa-fw fa-search"></i>
						</button>
					</form>
					</li>
					
				</ul>
		</nav>
	</div>

	<div class="site-category">
			<ul class='cat1'>
				<li><a href="/">Home</a></li>
				<li><a href="/">Python</a>
					<ul>
							<li><a href="/Python/Crawler">Crawler</a></li>
							<li><a href="/Python/Django">Django</a></li>
							<li><a href="/Python/Tensorflow">Tensorflow</a></li>
					</ul>
				</li>

				<li><a href="/">Data Science</a>
					<ul>
						<li><a href="/DS/Statistics">Statistics</a></li>
						<li><a href="/DS/R">R programming</a></li>
						<li><a href="/DS/ML">Machine Learning</a></li>
						<li><a href="/DS/ADsP">ADsP</a></li>
					</ul>
				</li>
				<li><a href="/">Data Base</a>
					<ul>
						<li><a href="/DB/MYSQL">MYSQL</a></li>
					</ul>
				</li>

				<li><a href="/">Development Enviroment</a>
					<ul>
						  <li><a href="/DE/Github Blog">Github Blog</a></li>
						  <li><a href="/DE/Git">Git</a></li>
						  <li><a href="/DE/Docker">Docker</a></li>
						  <li><a href="/DE/Ubuntu">Ubuntu</a></li>
						  <li><a href="/DE/Java">Java</a></li>
					</ul>
				</li>

				<li><a href="/">Android</a>
					<ul>
						<li><a href="/Android/Android">Android</a></li>
					</ul>
				</li>

			</ul>
		</div>

</header>

  <body>
    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">Python Selenium(셀레니움) 시작하기</h1>
    
    <p class="meta">
      August 11, 2018
      
    </p>
  </header>
  <section class="post-content"><p><br /><br /></p>
<p>연구실에서 갑자기 논문들에 대한 <point>impactfactor 수집기</point>를 만들게 되었다. 파이썬 웹크롤러를 만들 수 있는 아주 기본적인 패키지는 requests와 BeautifulSoup4 라는 패키지인데 사이트마다 request 방식이 get인지 post인지 구분해야하고 request를 보내도 작동이 안되는 페이지들이 있기 때문에 어려움이 살짝 있다. 일종의 무적 크롤러라고 불리는 <point>selenium</point>을 공부해보게 되었다! 맨 처음으로 셀레니움을 작동시키기 위한 셋팅 방법을 정리하였다.</p>
<p><br /><br /></p>

<blockquote>
  <subtitle>1. selenium 이란?</subtitle>
</blockquote>

<p>셀레니움의 원래 용도는 웹 테스트 자동화 프레임워크이다. <point>selenium webdriver</point>를 이용하여 다양한 브라우저를 조종할 수 있다. 셀레니움은 구글 크롬, 파이어폭스, 사파리, 마이크로소프트 엣지등의 브라우저를 조종할 수 있는 웹드라이버를 통하여 작동하기 때문에 웹 UI나 기능 테스트에 주로 사용한다. <br /><br /></p>

<p>BeautifulSoup 같은 다른 웹 수집기도 있지만 이러한 수집기들은 Javascript로 실행하는 비동기적인 컨텐츠(뒤 늦게 불려와지는 컨텐츠)들은 수집하기 어려운 단점이 있다. 셀레니움을 크롤러로 사용했을 때 웹드라이버를 통하여 실제 사람이 사용하는 것과 비슷하게 작동하기 때문에 <point>이미 페이지가 렌더링 된 상태에서 원하는 페이지의 html 파일을 수집할 수 있다.</point> (html 파일에는 수집하고자 하는 다양한 정보들이 들어있다.)</p>

<p>아직 많이 사용해 보지 않아서 정확한 단점은 알 수 없지만 처음 사용해 봤을 때 느낀점은 수집이 느리다는 단점이 있었다. 하지만 보이는 곳 어디든 수집이 가능하다는 장점이 있다.<br /><br /></p>

<blockquote>
  <subtitle> 2. selenium 설치</subtitle>
</blockquote>

<p>셀레니움은 pip를 이용하여 간단하게 설치할 수 있다. 그리고 페이지를 랜더링 한 후 html을 파싱해올 때 BeutifulSoup4를 사용하므로 만약에 설치되어 있지 않다면 같이 설치해준다.<br /></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>pip <span class="nb">install </span>selenium
<span class="nv">$ </span>pip <span class="nb">install </span>bs4</code></pre></figure>

<p><br /><br /></p>

<blockquote>
  <subtitle> 3. 크롬 브라우저 설치 및 크롬 웹드라이버 다운로드</subtitle>
</blockquote>

<p>우선 셀레니움은 webdriver를 이용하여 작동하는데 기본적으로 많이 사용하는 <point>크롬 웹드라이버</point>를 사용하여 작동할 예정이다. 운영체제 환경마다 셋팅하는 방법이 조금씩 다르다. 연구실 컴퓨터는 윈도우(GUI가능), 노트북은 맥 OS(GUI가능), 연구실 서버는 Ubuntu16.04 LTS(GUI 불가능)를 사용하므로 세가지 운영체제에 대하여 정리하였다. 크롬 웹드라이버를 이용하므로 반드시 크롬 브라우저는 설치되어 있어야 한다!<br /><br /></p>

<p>아래의 주소에서 크롬 드라이버를 다운로드 받을 수 있다(GUI 환경)<br /></p>
<ul>
  <li>크롬 드라이버 다운로드 : https://sites.google.com/a/chromium.org/chromedriver/downloads</li>
</ul>

<center><img src="https://user-images.githubusercontent.com/20412850/43917296-e66a623a-9c4a-11e8-8eb0-339d64fb49b7.png" width="60%" /></center>
<p><br /><br /></p>

<p>위의 홈페이지 url로 접속해보면 이렇게 크롬 웹 드라이버를 받을 수 있는 화면이 나온다. 오른쪽 중간쯤에 Latest Release의 크롬 드라이버링크를 클릭한다.<br /></p>

<center><img src="https://user-images.githubusercontent.com/20412850/43917385-289044e0-9c4b-11e8-9841-18986b56f94a.png" width="60%" /></center>
<p><br /></p>

<p>들어가보면 운영체제 별로 웹 드라이버를 다운로드 받을 수 있게 되어 있다.<br /><br /></p>

<p>1) Windows 10 / MAC OS(GUI 가능)<br /></p>

<p>반드시 운영체제에 맞는 드라이버를 다운로드 받아야 한다. 웹 드라이버를 다운로드 받게되면 압축파일이 받아지게 되는데 압축을 풀고난 크롬드라이버를 파이썬 코드와 같은 경로에 두거나 경로를 기억해둔다. 나는 압축을 풀고 웹 드라이버 파일을 파이썬 코드 파일과 동일한 경로에 두었다.<br /><br /></p>

<p>2) Ubuntu 16.04(GUI 불가능) + Docker 컨테이너 환경</p>

<p>서버에서는 <point>GUI가 안되고 파이썬 환경이 도커 컨테이너</point>로 생성되어 있다. 따라서, CLI 환경에서 크롬 브라우저를 설치하여야 하고 크롬 웹드라이버도 다운로드 받아야 했다.<br />
도커 컨테이너 내에서는 sudo 명령어를 사용하지 않는다. 먼저 <point>크롬 브라우저</point>를 설치한다.<br /></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c"># 크롬 apt-get에 추가</span>
<span class="nv">$ </span>wget <span class="nt">-q</span> <span class="nt">-O</span> - https://dl-ssl.google.com/linux/linux_signing_key.pub
<span class="nv">$ </span>apt-key add -

<span class="c"># apt-get 업데이트</span>
<span class="nv">$ </span>apt-get update

<span class="c"># 크롬 브라우저 설치</span>
<span class="nv">$ </span>apt-get <span class="nb">install </span>google-chrome-stable</code></pre></figure>

<p><br /><br /></p>

<p>그 다음 <point>크롬 웹드라이버</point>를 다운로드 받는다.<br /></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c"># Downloads 폴더에 드라이버 다운로드</span>
<span class="nv">$ </span>wget <span class="nt">-N</span> http://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip <span class="nt">-P</span> ~/Downloads

<span class="c"># 압축 풀기</span>
<span class="nv">$ </span>apt-get <span class="nb">install </span>unzip
<span class="nv">$ </span>unzip ~/Downloads/chromedriver_linux64.zip

<span class="c"># 프로젝트 폴더 안에 크롬 드라이버 넣어주기</span>
<span class="nv">$ </span><span class="nb">mv</span> <span class="nt">-f</span> ~/Downloads/chromedriver 프로젝트 경로입력</code></pre></figure>

<p><br /><br /></p>

<blockquote>
  <subtitle> 4. selenium 코드 테스트 </subtitle>
</blockquote>

<p>우분투 서버 환경에서는 GUI를 지원하지 않기 때문에 세 환경 모두 <point>headless 버전</point>으로 셀레니움 코드를 테스트 하였다. <br /><br /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>


<span class="n">options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">ChromeOptions</span><span class="p">()</span>

<span class="c"># headless 옵션 설정</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'headless'</span><span class="p">)</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"no-sandbox"</span><span class="p">)</span>

<span class="c"># 브라우저 윈도우 사이즈</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'window-size=1920x1080'</span><span class="p">)</span>

<span class="c"># 사람처럼 보이게 하는 옵션들</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"disable-gpu"</span><span class="p">)</span>   <span class="c"># 가속 사용 x</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"lang=ko_KR"</span><span class="p">)</span>    <span class="c"># 가짜 플러그인 탑재</span>
<span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'user-agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36'</span><span class="p">)</span>  <span class="c"># user-agent 이름 설정</span>

<span class="c"># 드라이버 위치 경로 입력</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="s">'./chromedriver.exe'</span><span class="p">,</span> <span class="n">chrome_options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>

<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://naver.com'</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get_screenshot_as_file</span><span class="p">(</span><span class="s">'capture_naver.png'</span><span class="p">)</span>    <span class="c"># 화면캡처</span>

<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span> <span class="c"># driver 종료</span></code></pre></figure>

<p><br />
캡쳐화면을 확인해보면 아래와 같다.<br /></p>
<center><img src="https://user-images.githubusercontent.com/20412850/43968016-e66bf544-9d00-11e8-922b-75147af16884.png" width="60%" /><br /></center>
<p><br /><br /></p>

<p><br /><br /><br /></p>

<blockquote>
  <subtitle>reference</subtitle>
</blockquote>

<ul>
  <li>https://beomi.github.io/2017/02/27/HowToMakeWebCrawler-With-Selenium/</li>
  <li>http://selenium-python.readthedocs.io/</li>
  <li>http://ocsusu.tistory.com/61</li>
</ul>

<p><br /><br /><br /><br /><br /></p>
</section>
  
<footer>
  <div class="tags">
    
    <a class="tag" href="/tags#Selenium">#Selenium</a>
    
  </div>
</footer>


</article>
<!-- Disqus -->
<a href="https://devYurim.github.io/python/crawler/2018/08/11/crawler-1.html#disqus_thread"></a>

<div class="comments">
  
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-devyurim-github-io-1.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            

</div>


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/python/django/development%20environment/docker/2018/08/09/django-docker-1.html">
        Docker를 이용하여 Django 웹 데이터베이스 서버 셋팅
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/python/crawler/2018/08/11/crawler-2.html">
        Python Selenium(셀레니움)으로 홈페이지 로그인하기
      </a>
  </div>
  
</div>



    </div>
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/rohanchandra/type-theme">Type Theme</a>
</p>
</footer>


    <script id="dsq-count-scr" src="//.disqus.com/count.js" async></script>

    <!-- Google Analytics Tracking code -->
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

  </body>
</html>
